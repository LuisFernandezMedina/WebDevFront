<app-header></app-header>

<div class="perfil-container">
  <div class="profile-info">
    <h2>Perfil de Usuario</h2>

    <!-- Imagen de perfil -->
    <div class="profile-picture-container">
      <img [src]="profilePicture" alt="Foto de perfil" class="profile-picture" />
      <input type="file" (change)="onFileSelected($event)" class="upload-button" *ngIf="isEditing" />
    </div>

    <!-- Información del usuario -->
    <div class="info-field">
      <label>Nombre y Apellidos</label>
      <p *ngIf="!isEditing">{{ user.nombre }}</p>
      <input type="text" [(ngModel)]="user.nombre" *ngIf="isEditing" />
    </div>

    <div class="info-field">
      <label>Correo</label>
      <p>{{ user.correo }}</p>
    </div>

    <div class="info-field" *ngIf="isEditing">
      <label>Nueva Contraseña</label>
      <input type="password" [(ngModel)]="user.newPassword" placeholder="Dejar vacío para no cambiar" />
    </div>

    <div class="info-field">
      <label>Balance Actual</label>
      <p>{{ user.balance }} €</p>
    </div>

    <!-- Botones de acción -->
    <div class="actions">
      <button class="btnEditar" *ngIf="!isEditing" (click)="toggleEdit()">Editar Perfil</button>
      <button class="btnGuardar" (click)="saveChanges()" [disabled]="!isFormValid()">Guardar Cambios</button>
      <button class="btnCancelar" (click)="toggleEdit()">Cancelar</button>
    </div>
  </div>

  <!-- Botón para volver -->
  <div class="back-button-container">
    <button class="back-button" (click)="navigateTo('/ventana-principal')">Volver</button>
  </div>

  <app-footer></app-footer>
</div>
